{% load static %}

<section class="shop_section layout_padding">
	<div class="container">
		<div class="heading_container heading_center">
			<h2>Latest Products</h2>
		</div>
		<div class="row">
			{% for product in products %} {% if forloop.counter < 9 %}
			<div class="col-sm-6 col-md-4 col-lg-3">
				<div class="box">
					<a href="{% url "home:product" product.id %}">
						<div class="img-box">
							<div
								id="carousel{{ product.id }}"
								class="carousel slide"
								data-ride="carousel"
								data-interval=""
							>
								<div class="carousel-inner">
									{% if product.img1 %}
									<div class="carousel-item active">
										<img
											src="{{ product.img1.url }}"
											class="d-block w-100"
											alt="Product Image 1"
										/>
									</div>
									{% endif %} {% if product.img2 %}
									<div class="carousel-item">
										<img
											src="{{ product.img2.url }}"
											class="d-block w-100"
											alt="Product Image 2"
										/>
									</div>
									{% endif %} {% if product.img3 %}
									<div class="carousel-item">
										<img
											src="{{ product.img3.url }}"
											class="d-block w-100"
											alt="Product Image 3"
										/>
									</div>
									{% endif %} {% if product.img4 %}
									<div class="carousel-item">
										<img
											src="{{ product.img4.url }}"
											class="d-block w-100"
											alt="Product Image 4"
										/>
									</div>
									{% endif %} {% if product.img5 %}
									<div class="carousel-item">
										<img
											src="{{ product.img5.url }}"
											class="d-block w-100"
											alt="Product Image 5"
										/>
									</div>
									{% endif %}
								</div>
								<!-- Carousel Controls -->
								<a
									class="carousel-control-prev"
									href="#carousel{{ product.id }}"
									role="button"
									data-slide="prev"
								>
									<span
										class="carousel-control-prev-icon"
										aria-hidden="true"
									></span>
									<span class="sr-only">Previous</span>
								</a>
								<a
									class="carousel-control-next"
									href="#carousel{{ product.id }}"
									role="button"
									data-slide="next"
								>
									<span
										class="carousel-control-next-icon"
										aria-hidden="true"
									></span>
									<span class="sr-only">Next</span>
								</a>
							</div>
						</div>
						<div class="detail-box">
							<h6>{{ product.name }}</h6>
							<h6>
								{% comment %} Price
								<span> Rs. {{ product.price }} </span> {% endcomment %}
								<span> {{ product.weight }}  </span>grams
							</h6>
						</div>
						<div class="new">
							<span> New </span>
						</div>
					</a>
				</div>
			</div>
			{% endif %} {% endfor %}
		</div>
		<div class="btn-box">
			<a href="{% url 'home:all' %}"> View All Products </a>
		</div>
	</div>
</section>

<script>
	document.addEventListener("DOMContentLoaded", function () {
		const carousels = document.querySelectorAll(".carousel");
		carousels.forEach((carousel) => {
			const randomInterval = Math.floor(Math.random() * (10000 - 4000 + 1)) + 2000;
			carousel.setAttribute("data-interval", randomInterval);
		});
	});
</script>
